:8080 {
    # Logging
    log {
        output stdout
    }

    # API endpoints
    handle /api/* {
        reverse_proxy api:8000
    }

    # WebSocket
    handle /ws* {
        reverse_proxy api:8000
    }

    # Everything else (Next.js)
    handle {
        reverse_proxy web:3000
    }
}
